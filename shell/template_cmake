CMAKE_MINIMUM_REQUIRED(VERSION 3.10)
PROJECT(demo)

set(CMAKE_CONFIGURATION_TYPES "Release;Debug" CACHE STRING "" FORCE)
if (MSVC)
	message("********************compiler msvc********************")
	list(APPEND CMAKE_CXX_FLAGS "/Wall /std:c++14 /EHsc")
	list(APPEND CMAKE_CXX_FLAGS_DEBUG "/Od")
	list(APPEND CMAKE_CXX_FLAGS_RELEASE "/O2 /DNDEBUG")
	# macro NDEBUG will remove all assert
endif ()

FILE(GLOB source *.cpp)
ADD_EXECUTABLE(demo ${source})

SET_TARGET_PROPERTIES(demo
  PROPERTIES
  ARCHIVE_OUTPUT_DIRECTORY "${CMAKE_BINARY_DIR}/lib"
  LIBRARY_OUTPUT_DIRECTORY "${CMAKE_BINARY_DIR}/lib"
  RUNTIME_OUTPUT_DIRECTORY "${CMAKE_BINARY_DIR}/bin")

ADD_SUBDIRECTORY(doc EXCLUDE_FROM_ALL)
